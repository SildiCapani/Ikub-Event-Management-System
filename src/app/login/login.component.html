<div class="container">
    <div class="details">
        <h2>Login</h2>
        <form [formGroup]="loginForm">
            <div class="input-container">
                <label>Email:</label>
                <div class="content">
                    <input type="email" placeholder="Email" formControlName="email">
                    
                </div><ng-container *ngTemplateOutlet="requiredErrorRef; context: { $implicit: loginForm.get('email')}"></ng-container>
            

            </div>

            <div>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>Password</mat-label>
                <input formControlName="password" matInput [type]=" hide ? 'password' : 'text'" required />
                <button  mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide Password'"
                [attr.aria-pressed]="hide">
                <mat-icon>
                    {{hide ? 'visibility_off' : 'visibility'}}
                </mat-icon>
            </button>
            <mat-error *ngIf="!loginForm.controls['password'].valid">
                Password is required
              </mat-error>
            </mat-form-field>
            </div>

            <!-- <div class="input-container">
                <label>Password:</label>
                <div class="content">
                    <input type="{{ showPassword ? 'text' : 'password' }}" placeholder="Password" formControlName="password">
                    <a class="show-password" (click)="togglePasswordVisibility()">{{ showPassword ? 'Hide ' : 'Show ' }}</a>
                </div><ng-container *ngTemplateOutlet="requiredErrorRef; context: { $implicit: loginForm.get('password')}"></ng-container> 
                
            
            </div>-->
            <button class="button" (ngSubmit)="submit()">Login</button>

            <ng-template #requiredErrorRef let-control>
                <span class="input-error" *ngIf="(control?.errors?.required) && isSubmitted" style="color: red;" >Schould not be empty</span>
                <span *ngIf="(control?.errors?.email) && isSubmitted" style="color: red;" >Email is not correct</span>
                <span *ngIf="(control?.errors?.minlength) && isSubmitted" style="color: red;" >Password length not correct, you need to add minimum {{loginForm.get('password')?.errors?.['minlength']?.requiredLength}} characters! </span>
            </ng-template>
        
            <div class="register">
                New user? &nbsp;
                <a routerLink="/register" [queryParams]="{returnUrl : returnUrl}">
                  Register here
                </a>
            </div>

        </form>
    </div>
</div>